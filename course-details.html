<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediLearn - Course Details</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts: Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
            color: #1e293b;
        }

        /* --- Navbar --- */
        .navbar {
            background-color: white;
            border-bottom: 1px solid #eef1f6;
            padding: 0.8rem 0;
        }
        .navbar-brand {
            font-weight: 800;
            font-size: 1.25rem;
            color: #0f172a;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .nav-link {
            font-weight: 600;
            font-size: 0.9rem;
            color: #64748b !important;
            margin: 0 0.8rem;
        }
        .nav-link.active {
            color: #1d7afc !important;
        }
        .search-input {
            background-color: #f1f5f9;
            border: none;
            padding: 0.6rem 1rem 0.6rem 2.5rem;
            border-radius: 0.5rem;
            font-size: 0.9rem;
            width: 280px;
        }
        .search-wrapper {
            position: relative;
        }
        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
            font-size: 0.9rem;
        }
        .icon-btn {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background-color: #f1f5f9;
            color: #64748b;
            border: none;
            transition: background 0.2s;
        }
        .icon-btn:hover {
            background-color: #e2e8f0;
        }
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }

        /* --- Breadcrumb --- */
        .breadcrumb-item a {
            color: #64748b;
            text-decoration: none;
            font-weight: 500;
            font-size: 0.9rem;
        }
        .breadcrumb-item.active {
            color: #0f172a;
            font-weight: 600;
            font-size: 0.9rem;
        }
        .breadcrumb-item + .breadcrumb-item::before {
            color: #cbd5e1;
        }

        /* --- Video Player Area --- */
        .video-container {
            position: relative;
            border-radius: 1rem;
            overflow: hidden;
            aspect-ratio: 16/9;
            background-color: #000;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .video-thumbnail {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.9;
        }
        .play-button-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background-color: rgba(0, 0, 0, 0.6);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid rgba(255,255,255,0.2);
        }
        .play-button-overlay:hover {
            background-color: #1d7afc;
            transform: translate(-50%, -50%) scale(1.1);
        }
        .video-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 1rem 1.5rem;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            font-size: 0.85rem;
            font-weight: 600;
        }
        .progress-bar-bg {
            flex-grow: 1;
            height: 4px;
            background-color: rgba(255,255,255,0.3);
            border-radius: 2px;
            margin: 0 1rem;
            position: relative;
        }
        .progress-fill {
            width: 30%;
            height: 100%;
            background-color: #1d7afc;
            border-radius: 2px;
            position: relative;
        }
        .progress-handle {
            width: 12px;
            height: 12px;
            background-color: white;
            border-radius: 50%;
            position: absolute;
            right: -6px;
            top: 50%;
            transform: translateY(-50%);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        /* --- Header Info --- */
        .course-title {
            font-weight: 800;
            font-size: 2rem;
            color: #0f172a;
            margin-bottom: 0.5rem;
            letter-spacing: -0.5px;
        }
        .course-subtitle {
            color: #64748b;
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }
        .meta-info {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            font-size: 0.9rem;
            margin-bottom: 2rem;
        }
        .instructor-link {
            color: #1d7afc;
            font-weight: 600;
            text-decoration: none;
        }
        .rating-badge {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            color: #f59e0b; /* Amber 500 */
            font-weight: 700;
        }
        .rating-count {
            color: #64748b;
            font-weight: 500;
            margin-left: 0.25rem;
        }

        /* --- Tabs --- */
        .nav-tabs {
            border-bottom: 1px solid #e2e8f0;
            margin-bottom: 2rem;
        }
        .nav-tabs .nav-link {
            border: none;
            color: #64748b;
            font-weight: 600;
            padding: 1rem 0;
            margin-right: 2rem;
            background: transparent;
            border-bottom: 2px solid transparent;
        }
        .nav-tabs .nav-link:hover {
            color: #0f172a;
        }
        .nav-tabs .nav-link.active {
            color: #1d7afc;
            border-bottom-color: #1d7afc;
        }

        /* --- Content Sections --- */
        .content-heading {
            font-weight: 700;
            font-size: 1.25rem;
            color: #0f172a;
            margin-bottom: 1rem;
        }
        .content-text {
            color: #475569;
            line-height: 1.7;
            margin-bottom: 2rem;
        }
        .learning-list {
            list-style: none;
            padding: 0;
        }
        .learning-list li {
            position: relative;
            padding-left: 1.5rem;
            margin-bottom: 0.75rem;
            color: #475569;
        }
        .learning-list li::before {
            content: "â€¢";
            color: #cbd5e1;
            font-weight: bold;
            position: absolute;
            left: 0;
            font-size: 1.2rem;
            line-height: 1.2;
        }

        /* --- Sidebar Cards --- */
        .sidebar-card {
            background: white;
            border: 1px solid #eef1f6;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.02);
        }
        .price-tag {
            font-size: 2rem;
            font-weight: 800;
            color: #0f172a;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }
        .original-price {
            font-size: 1.1rem;
            color: #94a3b8;
            text-decoration: line-through;
            font-weight: 500;
        }
        .btn-enroll {
            background-color: #1d7afc;
            color: white;
            font-weight: 700;
            width: 100%;
            padding: 0.875rem;
            border-radius: 0.5rem;
            border: none;
            margin-bottom: 0.75rem;
            transition: background 0.2s;
        }
        .btn-enroll:hover {
            background-color: #1664d6;
        }
        .guarantee-text {
            text-align: center;
            font-size: 0.8rem;
            color: #64748b;
            margin-bottom: 1.5rem;
        }
        .feature-item {
            display: flex;
            align-items: start;
            gap: 0.75rem;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: #334155;
        }
        .feature-icon {
            color: #1d7afc;
            width: 20px;
            text-align: center;
            margin-top: 2px;
        }

        /* Instructor Card */
        .instructor-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        .instructor-img-lg {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            object-fit: cover;
        }
        .instructor-bio {
            font-size: 0.9rem;
            color: #475569;
            line-height: 1.6;
        }

        /* Certificate Card */
        .cert-preview {
            background-color: #f1f5f9;
            height: 160px;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            position: relative;
            overflow: hidden;
        }
        .cert-bg-icon {
            font-size: 4rem;
            color: #cbd5e1;
            opacity: 0.5;
        }
        .cert-badge {
            position: absolute;
            color: #1d7afc; /* Light Blue */
            font-size: 3rem;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
        }

        /* Sticky Sidebar Desktop */
        @media (min-width: 992px) {
            .sticky-sidebar {
                position: sticky;
                top: 90px; /* Offset for navbar */
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .course-title {
                font-size: 1.5rem;
            }
            .nav-tabs .nav-link {
                margin-right: 1rem;
                padding: 0.75rem 0;
            }
        }
    </style>
</head>
<body>

    <!-- Navbar -->
    <nav class="navbar sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fa-solid fa-shield-halved text-primary"></i>
                HealthLearn
            </a>
            
            <div class="d-none d-md-flex align-items-center">
                <a href="learner-dashboard.html" class="nav-link">Home</a>
                <a href="courses.html" class="nav-link active">Courses</a>
                <a href="#" class="nav-link">About Us</a>
            </div>

            <div class="d-flex align-items-center gap-3 ms-auto ms-md-0">
                <div class="search-wrapper d-none d-lg-block">
                    <i class="fa-solid fa-magnifying-glass search-icon"></i>
                    <input type="text" class="search-input" placeholder="Search">
                </div>
                
                <button class="icon-btn">
                    <i class="fa-regular fa-bell"></i>
                </button>
                
                <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?q=80&w=200&auto=format&fit=crop" 
                     class="user-avatar" alt="User">
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container py-4">
        
        <!-- Breadcrumb -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#">Courses</a></li>
                <li class="breadcrumb-item"><a href="#">Cardiology</a></li>
                <li class="breadcrumb-item active" aria-current="page">Advanced Cardiac Life Support</li>
            </ol>
        </nav>

        <div class="row g-5">
            
            <!-- LEFT COLUMN (Content) -->
            <div class="col-lg-8">
                
                <!-- Video Player -->
                <div class="video-container">
                    <img src="https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?q=80&w=1200&auto=format&fit=crop" 
                         alt="Video Thumbnail" class="video-thumbnail">
                    
                    <div class="play-button-overlay">
                        <i class="fa-solid fa-play ps-2"></i>
                    </div>
                    
                    <div class="video-controls">
                        <span>0:37</span>
                        <div class="progress-bar-bg">
                            <div class="progress-fill">
                                <div class="progress-handle"></div>
                            </div>
                        </div>
                        <span>2:23</span>
                    </div>
                </div>

                <!-- Course Header -->
                <h1 class="course-title">Advanced Cardiac Life Support (ACLS)</h1>
                <p class="course-subtitle">A comprehensive, evidence-based course for healthcare professionals.</p>

                <div class="meta-info">
                    <div>
                        <span class="text-muted me-1">By</span>
                        <a href="#" class="instructor-link">Dr. Emily Carter, MD</a>
                    </div>
                    <div class="rating-badge">
                        4.9
                        <div class="d-flex small text-warning">
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star"></i>
                            <i class="fa-solid fa-star-half-stroke"></i>
                        </div>
                        <span class="rating-count">(1,284 ratings)</span>
                    </div>
                </div>

                <!-- Tabs -->
                <ul class="nav nav-tabs">
                    <li class="nav-item">
                        <a class="nav-link active" href="#">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Curriculum</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Reviews</a>
                    </li>
                </ul>

                <!-- Tab Content: About -->
                <div class="mb-5">
                    <h2 class="content-heading">About this course</h2>
                    <p class="content-text">
                        This Advanced Cardiac Life Support (ACLS) course builds on the foundation of basic life support (BLS) skills, emphasizing the importance of continuous, high-quality CPR. The course is designed for healthcare professionals who either direct or participate in the management of cardiopulmonary arrest or other cardiovascular emergencies. This includes personnel in emergency response, emergency medicine, intensive care, and critical care units.
                        <br><br>
                        Through didactic instruction and active participation in simulated cases, students will enhance their skills in the recognition and intervention of cardiopulmonary arrest, immediate post-cardiac arrest, acute arrhythmia, stroke, and acute coronary syndromes (ACS).
                    </p>

                    <h2 class="content-heading">What you'll learn</h2>
                    <ul class="learning-list">
                        <li>Recognize and manage respiratory and cardiac arrest.</li>
                        <li>Understand basic and advanced airway management.</li>
                        <li>Learn about pharmacology related to ACLS.</li>
                        <li>Effectively manage ACS and stroke.</li>
                        <li>Demonstrate competence in a team resuscitation dynamic.</li>
                    </ul>
                </div>

            </div>

            <!-- RIGHT COLUMN (Sidebar) -->
            <div class="col-lg-4">
                <div class="sticky-sidebar">
                    
                    <!-- Enrollment Card -->
                    <div class="sidebar-card">
                        <div class="price-tag">
                            $299 <span class="original-price">$499</span>
                        </div>
                        
                        <button class="btn-enroll" onclick="window.open('course-player.html', '_self')">Enroll Now</button>
                        <p class="guarantee-text">30-Day Money-Back Guarantee</p>

                        <div class="feature-item">
                            <i class="fa-regular fa-circle-play feature-icon"></i>
                            <span>8 hours of on-demand video</span>
                        </div>
                        <div class="feature-item">
                            <i class="fa-regular fa-file-lines feature-icon"></i>
                            <span>24 downloadable resources</span>
                        </div>
                        <div class="feature-item">
                            <i class="fa-solid fa-infinity feature-icon"></i>
                            <span>Full lifetime access</span>
                        </div>
                        <div class="feature-item">
                            <i class="fa-solid fa-mobile-screen feature-icon"></i>
                            <span>Access on mobile and TV</span>
                        </div>
                        <div class="feature-item">
                            <i class="fa-solid fa-medal feature-icon"></i>
                            <span>Certificate of completion</span>
                        </div>
                    </div>

                    <!-- Instructor Card -->
                    <div class="sidebar-card">
                        <h5 class="content-heading mb-3" style="font-size: 1.1rem;">About the Instructor</h5>
                        <div class="instructor-header">
                            <img src="https://images.unsplash.com/photo-1559839734-2b71ea197ec2?q=80&w=200&auto=format&fit=crop" 
                                 alt="Dr. Emily Carter" class="instructor-img-lg">
                            <div>
                                <div class="fw-bold text-dark">Dr. Emily Carter, MD</div>
                                <div class="small text-muted">Cardiologist, Mayo Clinic</div>
                            </div>
                        </div>
                        <p class="instructor-bio">
                            Dr. Carter is a board-certified cardiologist with over 15 years of experience in emergency cardiac care. She is passionate about medical education and creating high-quality, accessible training for healthcare professionals.
                        </p>
                    </div>

                    <!-- Certificate Card -->
                    <div class="sidebar-card">
                        <h5 class="content-heading mb-3" style="font-size: 1.1rem;">Get Your Certificate</h5>
                        <div class="cert-preview">
                            <i class="fa-regular fa-file-certificate cert-bg-icon"></i> <!-- Note: FA icon might vary, using placeholder logic visually -->
                            <i class="fa-solid fa-certificate cert-badge"></i>
                        </div>
                        <p class="small text-muted mb-0">
                            Upon completion, receive a shareable certificate to showcase your new skills. This course is accredited for 8 CME credits.
                        </p>
                    </div>

                </div>
            </div>

        </div>
    </div>

    <!-- Bootstrap Bundle JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
const courseId = new URLSearchParams(window.location.search).get("id");

$.get("api/course/details.php", { course_id: courseId }, function (c) {
    $(".course-title").text(c.title);
    $(".course-subtitle").text(c.subtitle);
    $(".instructor-link").text(c.instructor);
    $(".content-text").text(c.description);
    $(".price-tag").html(`$${c.price} <span class="original-price">$${c.original_price}</span>`);
});
</script>
<script>
$.get("api/course/lessons.php", { course_id: courseId }, function (lessons) {
    let html = "<ul class='learning-list'>";
    $.each(lessons, function (_, l) {
        html += `<li>${l.title} (${Math.floor(l.duration_sec/60)} min)</li>`;
    });
    html += "</ul>";
    $(".nav-tabs").after(html);
});
</script>
<script>
$.get("api/course/reviews.php", { course_id: courseId }, function (reviews) {
    let html = "";
    $.each(reviews, function (_, r) {
        html += `<p><strong>${r.user}</strong>: ${r.review}</p>`;
    });
    $(".nav-tabs").after(html);
});
</script>
<script>
$.get("api/course/check-enrollment.php", { course_id: courseId }, function (res) {
    if (res.enrolled) {
        $(".btn-enroll").text("Go to Course")
            .click(() => window.location.href="course-player.html?id="+courseId);
    }
});

$(".btn-enroll").click(function () {
    $.post("api/course/enroll.php", { course_id: courseId }, function () {
        Swal.fire("Enrolled!", "Redirecting to course...", "success")
        .then(() => window.location.href="course-player.html?id="+courseId);
    });
});
</script>

</body>
</html>